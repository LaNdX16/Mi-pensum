<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Mi pensum de medicina en la UASD – Landy</title>

<!-- Fuente decorativa -->
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&display=swap" rel="stylesheet" />

<style>
  /* Fondo con patrón de estetoscopios morados claros */
  body {
    font-family: 'Segoe UI', sans-serif;
    background-color: #ffd1e8;
    margin: 2rem;
    overflow-x: hidden;
  }

  h1 {
    text-align: center;
    font-size: 2.8em;
    color: #5e3a8d;
    margin-bottom: 2rem;
    font-family: 'Playfair Display', serif;
    text-shadow: 2px 2px 10px rgba(94, 58, 141, 0.7);
    position: relative;
  }

  #contadorCreditos {
    position: fixed;
    top: 10px;
    right: 15px;
    font-size: 0.8rem;
    color: #d95dbd;
    background-color: #f8a6cd;
    padding: 6px 10px;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(217, 93, 189, 0.3);
    font-family: 'Segoe UI', sans-serif;
    user-select: none;
    z-index: 1000;
  }

  #pensum {
    display: flex;
    gap: 0.5rem;
    overflow-x: auto;
    padding-bottom: 1rem;
    scroll-behavior: smooth;
  }

  #pensum::-webkit-scrollbar {
    height: 8px;
  }

  #pensum::-webkit-scrollbar-thumb {
    background-color: #e8a4d0;
    border-radius: 6px;
  }

  #pensum::-webkit-scrollbar-track {
    background: transparent;
  }

  .semestre {
    flex: 0 0 300px;
    background-color: #f8a6cd;
    border-radius: 12px;
    padding: 1rem;
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
    border: 2px solid #f8c4dc;
    scroll-snap-align: start;
  }

  .semestre h2 {
    color: #d95dbd;
    font-size: 1.3em;
    margin-bottom: 0.8rem;
    text-align: center;
    text-shadow: 1px 1px 4px rgba(217, 93, 189, 0.2);
  }

  .materia {
    list-style: none;
    padding: 0.6em 1em;
    border-radius: 12px;
    margin: 0.4em 0;
    cursor: pointer;
    background-color: #fcbde5;
    color: #4a295a;
    user-select: none;
    box-shadow: 0 4px 10px rgba(217, 93, 189, 0.3);
    transition: background-color 0.3s ease;
  }

  .materia.pendiente:hover {
    background-color: #f7bde2;
  }

  .materia.completada {
    text-decoration: line-through;
    background-color: #b39ddb;
    color: #4a2a8a;
    cursor: pointer;
  }

  /* Quitar animación "latido" */
  .materia.completada:hover {
    background-color: #a285d6;
  }

  .materia.bloqueada {
    background-color: #ffe6f1;
    color: #dba7cb;
    cursor: not-allowed;
    box-shadow: none;
  }

  .optativas-title {
    text-align: center;
    font-style: italic;
    font-weight: 600;
    margin-top: 0.6rem;
    margin-bottom: 0.8rem;
    color: #8e3b6b;
  }
</style>
</head>
<body>

<h1>Mi pensum de medicina en la UASD – Landy</h1>
<div id="contadorCreditos">Créditos completados: 0</div>
<div id="pensum"></div>

<script>
  const materias = {
    "1. Primer Semestre Pre-Médica": [
      { clave: "BIO-0170", nombre: "Biología Básica", cr: 2 },
      { clave: "BIO-0180", nombre: "Laboratorio de Biología Básica", cr: 1 },
      { clave: "DOP-1000", nombre: "Orientación Institucional", cr: 1 },
      { clave: "FIL-0110", nombre: "Introducción a la Filosofía", cr: 3 },
      { clave: "LET-0110", nombre: "Lengua Española Básica I", cr: 3 },
      { clave: "MAT-0140", nombre: "Matemática Básica", cr: 4 },
      { clave: "QUI-0140", nombre: "Química Básica", cr: 3 },
      { clave: "SOC-0100", nombre: "Introducción a las Ciencias Sociales", cr: 3 },
      { clave: "FIS-0140", nombre: "Física Básica", cr: 4 }
    ],
    // ... otras materias, no las pongo aquí para no extender tanto
    "7. Séptimo Semestre Pre-Internado": [
      { clave: "MED-4250", nombre: "Laboratorio Otorrinolaringología", cr: 1, prerrequisitos: ["BAN-3000", "MED-4210", "MED-4220"] },
      { clave: "MED-3290", nombre: "Otorrinolaringología", cr: 2, prerrequisitos: ["BAN-3000", "MED-4210", "MED-4220"] },
      { clave: "MED-3280", nombre: "Anestesiología", cr: 3, prerrequisitos: ["MED-6170", "MED-6180"] },
      { clave: "MED-1240", nombre: "Neurocirugía", cr: 2, prerrequisitos: ["BAN-3000", "MED-4210", "MED-4220"] },
      { clave: "FAR-3510", nombre: "Nutrición (Medicina)", cr: 3, prerrequisitos: ["CFI-2180", "MED-6190", "MED-7100"] },
      { clave: "MED-ZZX0", nombre: "Asignatura Optativa", cr: 3 },
      { clave: "MED-5120", nombre: "Oncología", cr: 2, prerrequisitos: ["BAN-3000", "MED-4210", "MED-4220"] },
      { clave: "MED-4290", nombre: "Laboratorio Urología", cr: 1, prerrequisitos: ["BAN-3000", "MED-4210", "MED-4220", "MED-2140"] },
      { clave: "MED-4280", nombre: "Urología", cr: 2, prerrequisitos: ["BAN-3000", "MED-4210", "MED-4220", "MED-2140"] },
      { clave: "MED-4270", nombre: "Laboratorio Traumatología y Ortopedia", cr: 1, prerrequisitos: ["BAN-3000", "MED-4210", "MED-4220"] },
      { clave: "MED-4260", nombre: "Traumatología y Ortopedia", cr: 3, prerrequisitos: ["BAN-3000", "MED-4210", "MED-4220"] }
    ]
  };

  const optativas = {
    "Semestre 4 MED": [
      { clave: "MED-2370", nombre: "Intervención Terapia en Pareja y Familia", cr: 3, prerrequisitos: ["MED-2350", "MED-2360"] },
      { clave: "FAR-1450", nombre: "Toxicología General", cr: 3, prerrequisitos: ["SAP-1160", "SAP-1170"] },
      { clave: "SAP-1180", nombre: "Medicina de Urgencias y Desastres", cr: 2, prerrequisitos: ["CMO-3160", "CMO-3170", "CFI-3110", "SAP-2030"] }
    ],
    "Semestre 5 PRE-INT": [
      { clave: "MED-2380", nombre: "Sustancias Psicoactivas y Adicción", cr: 3, prerrequisitos: ["MED-4740", "MED-4750", "CFI-3130", "CFI-3140"] },
      { clave: "CFI-3200", nombre: "Genética Clínica", cr: 3 }
    ],
    "Semestre 7 PRE-INT": [
      { clave: "MED-5210", nombre: "Medicina del Deporte", cr: 3, prerrequisitos: ["BAN-3000", "MED-4260", "MED-4270"] },
      { clave: "MED-5220", nombre: "Medicina Física y Rehabilitación", cr: 3, prerrequisitos: ["BAN-3000", "MED-4260", "MED-4270"] },
      { clave: "SAP-1190", nombre: "Salud Ocupacional y Ambiental", cr: 3, prerrequisitos: ["SAP-1160", "SAP-1170", "SAP-2030"] }
    ]
  };

  const pensumDiv = document.getElementById('pensum');
  const contadorCreditos = document.getElementById('contadorCreditos');

  // Función para saber si una materia tiene prerrequisitos no cumplidos
  function bloqueada(materia, completadas) {
    if (!materia.prerrequisitos) return false;
    return materia.prerrequisitos.some(pre => !completadas.has(pre));
  }

  // Variables para manejar materias completadas
  let materiasCompletadas = new Set();

  // Cargar materias completadas del localStorage
  function cargarCompletadas() {
    const data = localStorage.getItem('medicina_materias_completadas');
    if (data) {
      materiasCompletadas = new Set(JSON.parse(data));
    }
  }

  // Guardar materias completadas en localStorage
  function guardarCompletadas() {
    localStorage.setItem('medicina_materias_completadas', JSON.stringify([...materiasCompletadas]));
  }

  // Actualizar contador de créditos completados
  function actualizarContador() {
    let totalCreditos = 0;
    materiasCompletadas.forEach(clave => {
      for (const sem in materias) {
        const mat = materias[sem].find(m => m.clave === clave);
        if (mat) totalCreditos += mat.cr;
      }
      for (const semOpt in optativas) {
        const matOpt = optativas[semOpt].find(m => m.clave === clave);
        if (matOpt) totalCreditos += matOpt.cr;
      }
    });
    contadorCreditos.textContent = `Créditos completados: ${totalCreditos}`;
  }

  // Función para crear elementos de materias
  function crearMateriaElemento(materia, completadas) {
    const li = document.createElement('li');
    li.classList.add('materia');

    const estaBloqueada = bloqueada(materia, completadas);
    if (estaBloqueada) {
      li.classList.add('bloqueada');
    } else if (completadas.has(materia.clave)) {
      li.classList.add('completada');
    } else {
      li.classList.add('pendiente');
    }

    li.textContent = `${materia.clave} - ${materia.nombre} (${materia.cr} CR)`;

    if (!estaBloqueada) {
      li.addEventListener('click', () => {
        if (completadas.has(materia.clave)) {
          completadas.delete(materia.clave);
          li.classList.remove('completada');
          li.classList.add('pendiente');
        } else {
          completadas.add(materia.clave);
          li.classList.remove('pendiente');
          li.classList.add('completada');
        }
        guardarCompletadas();
        actualizarContador();
      });
    }

    return li;
  }

  // Crear visual del pensum con materias y optativas
  function renderizarPensum() {
    pensumDiv.innerHTML = '';

    // Render materias normales
    for (const semestre in materias) {
      const divSemestre = document.createElement('div');
      divSemestre.classList.add('semestre');

      const h2 = document.createElement('h2');
      h2.textContent = semestre;
      divSemestre.appendChild(h2);

      const ul = document.createElement('ul');
      ul.style.paddingLeft = '0';
      ul.style.margin = '0';

      materias[semestre].forEach(materia => {
        ul.appendChild(crearMateriaElemento(materia, materiasCompletadas));
      });

      divSemestre.appendChild(ul);
      pensumDiv.appendChild(divSemestre);

      // Si hay optativas para este semestre, también las agregamos aquí
      if (optativas[semestre]) {
        const tituloOptativas = document.createElement('div');
        tituloOptativas.classList.add('optativas-title');
        tituloOptativas.textContent = 'Optativas';
        divSemestre.appendChild(tituloOptativas);

        const ulOpt = document.createElement('ul');
        ulOpt.style.paddingLeft = '0';
        ulOpt.style.margin = '0';

        optativas[semestre].forEach(optativa => {
          ulOpt.appendChild(crearMateriaElemento(optativa, materiasCompletadas));
        });

        divSemestre.appendChild(ulOpt);
      }
    }
  }

  cargarCompletadas();
  renderizarPensum();
  actualizarContador();
</script>

</body>
</html>
