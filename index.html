<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Mi pensum de Medicina UASD</title>

<style>
    body {
        font-family: 'Segoe UI', sans-serif;
        background-color: #ffe4f1;
        margin: 20px;
    }
    h1 {
        text-align: center;
        font-size: 2.5rem;
        color: #6a0dad;
        margin-bottom: 10px;
    }
    #contador {
        text-align: center;
        font-size: 1.2rem;
        color: #4a2a8a;
        margin-bottom: 20px;
    }
    #pensum {
        display: flex;
        gap: 15px;
        overflow-x: auto;
        padding-bottom: 10px;
    }
    .semestre {
        background-color: #f8a6cd;
        border-radius: 12px;
        padding: 15px;
        width: 280px;
        box-shadow: 0 6px 12px rgba(0,0,0,0.1);
        flex: 0 0 auto;
    }
    .semestre h2 {
        text-align: center;
        font-size: 1.3rem;
        color: #6a0dad;
        margin-bottom: 10px;
    }
    .semestre ul {
        list-style: none;
        padding: 0;
        margin: 0;
    }
    .materia {
        background-color: #fcbde5;
        padding: 8px 10px;
        border-radius: 8px;
        margin-bottom: 6px;
        cursor: pointer;
        transition: 0.3s;
    }
    .materia:hover {
        background-color: #f7aede;
    }
    .completada {
        background-color: #d1b3f6 !important;
        text-decoration: line-through;
        color: #4a2a8a;
    }
    .bloqueada {
        background-color: #f2f2f2 !important;
        color: #aaa;
        cursor: not-allowed;
    }
</style>
</head>
<body>

<h1>Mi pensum de Medicina UASD</h1>
<div id="contador">Créditos completados: 0 / 500</div>
<div id="pensum"></div>

<script>
const materias = {
    "1. Primer Semestre Pre-Médica": [
        { clave: "BIO-0170", nombre: "Biología Básica", creditos: 4 },
        { clave: "BIO-0180", nombre: "Lab. Biología Básica", creditos: 1, prerrequisitos: ["BIO-0170"] },
        { clave: "DOP-1000", nombre: "Orientación Institucional", creditos: 2 },
        { clave: "FIL-0110", nombre: "Introducción a la Filosofía", creditos: 3 },
        { clave: "FIS-0140", nombre: "Física Básica", creditos: 4 },
        { clave: "LET-0110", nombre: "Lengua Española Básica I", creditos: 3 },
        { clave: "MAT-0140", nombre: "Matemática Básica", creditos: 3 },
        { clave: "QUI-0140", nombre: "Química Básica", creditos: 4 },
        { clave: "SOC-0100", nombre: "Intro a Ciencias Sociales", creditos: 3 }
    ],
    "Materias Optativas": [
        { clave: "MED-2370", nombre: "Introducción a Terapia en Pareja y Familia", creditos: 3, prerrequisitos: ["MED-2350", "MED-2360"] },
        { clave: "FAR-1450", nombre: "Toxicología General", creditos: 3, prerrequisitos: ["SAP-1160", "SAP-1170"] },
        { clave: "SAP-1180", nombre: "Medicina de Urgencias y Desastres", creditos: 4, prerrequisitos: ["CMO-3160", "CMO-3170", "CFI-3110", "SAP-2030"] },
        { clave: "MED-2380", nombre: "Sustancias Psicoactivas y Adicciones", creditos: 3, prerrequisitos: ["MED-4740", "MED-4750", "CFI-3130", "CFI-3140"] },
        { clave: "CFI-3200", nombre: "Genética Clínica", creditos: 3 },
        { clave: "MED-5210", nombre: "Medicina del Deporte", creditos: 3, prerrequisitos: ["BAN-3000", "MED-4260", "MED-4270"] },
        { clave: "MED-5220", nombre: "Medicina Física y Rehabilitación", creditos: 3, prerrequisitos: ["BAN-3000", "MED-4260", "MED-4270"] },
        { clave: "SAP-1190", nombre: "Salud Ocupacional y Ambiental", creditos: 4, prerrequisitos: ["SAP-1160", "SAP-1170", "SAP-2030"] }
    ]
};

// Ajusta el total de créditos según el pensum real
const TOTAL_CREDITOS = 500;

const STORAGE_KEY = "materiasCompletadas";
let completadas = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
const contenedor = document.getElementById("pensum");
const contador = document.getElementById("contador");

function puedeTomar(materia) {
    if (!materia.prerrequisitos) return true;
    return materia.prerrequisitos.every(pr => completadas.includes(pr));
}

function calcularCreditos() {
    let total = 0;
    for (const semestre in materias) {
        materias[semestre].forEach(materia => {
            if (completadas.includes(materia.clave)) {
                total += materia.creditos || 0;
            }
        });
    }
    return total;
}

function renderPensum() {
    contenedor.innerHTML = "";
    for (const semestre in materias) {
        const divSem = document.createElement("div");
        divSem.className = "semestre";
        divSem.innerHTML = `<h2>${semestre}</h2>`;
        
        const ul = document.createElement("ul");
        materias[semestre].forEach(materia => {
            const li = document.createElement("li");
            li.textContent = `${materia.clave} - ${materia.nombre} (${materia.creditos} cr.)`;
            li.className = "materia";

            if (completadas.includes(materia.clave)) {
                li.classList.add("completada");
            } else if (!puedeTomar(materia)) {
                li.classList.add("bloqueada");
            }

            li.addEventListener("click", () => {
                if (li.classList.contains("bloqueada")) return;
                if (li.classList.contains("completada")) {
                    completadas = completadas.filter(c => c !== materia.clave);
                } else {
                    completadas.push(materia.clave);
                }
                localStorage.setItem(STORAGE_KEY, JSON.stringify(completadas));
                renderPensum();
            });

            ul.appendChild(li);
        });
        divSem.appendChild(ul);
        contenedor.appendChild(divSem);
    }

    contador.textContent = `Créditos completados: ${calcularCreditos()} / ${TOTAL_CREDITOS}`;
}

renderPensum();
</script>

</body>
</html>
